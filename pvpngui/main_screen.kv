#:kivy 1.10.1

#    This file is part of ProtonVPN-CLI-GUI for Linux.

#    Copyright (C) <year>  <name of author>
#
#    ProtonVPN-CLI-GUI is free software: you can redistribute it and/or modify
#    it under the terms of the GNU General Public License as published by
#    the Free Software Foundation, either version 3 of the License, or
#    (at your option) any later version.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU General Public License for more details.
#
#    You should have received a copy of the GNU General Public License
#    along with this program.  If not, see <https://www.gnu.org/licenses/>.


<MainScreen>:
    name: '_main_screen_'
    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'top'
        canvas.before:
            Color:
                rgba: [0.1647, 0.1647, 0.2078, 1]
            Rectangle:
                pos: self.pos
                size: self.size
        BoxLayout:
            orientation: 'horizontal'
            padding: [0, 8]
            size_hint_y: 0.055
            spacing: 10
            RelativeLayout:
                Image:
                    source: './images/protonvpn-sign-green_cropped.png'
                    pos_hint: {'center_x': 0.05, 'center_y': 0.5}
                PvpnImageButton:
                    id: menu_button_icon
                    source: './images/hamburger-menu-icon.png'
                    pos_hint: {'center_x': 0.15, 'center_y': 0.5}
                    size_hint: 0.575, 0.575
                    on_release: root.open_dropdown_menu()
                BoxLayout:
                    size_hint: 0.4, 1
                    pos_hint: {'x': 0.565, 'y': 0}
                    PvpnImageButton:
                        source: './images/minimize-icon.png'
                        pos_hint: {'x': 1, 'y': 0.25}
                        size_hint: 0.575, 0.575
                        on_release: app.root.minimize_app()
                    PvpnImageButton:
                        source: './images/maximize-icon.png'
                        pos_hint: {'x': 1, 'y': 0.25}
                        size_hint: 0.575, 0.575
                        on_release: app.root.maximize_app()
                    PvpnImageButton:
                        source: './images/close-window-icon.png'
                        size_hint: 0.575, 0.575
                        pos_hint: {'x': 1, 'y': 0.25}
                        on_release: app.root.close_app()
    BackgroundImgBoxLayout:
        id: connection_window
        orientation: 'vertical'
        padding: [55, 35, 55, 100]
        size_hint_y: 0.35
        pos_hint: {'center_x': 0.5, 'center_y': 0.7695}
        canvas.before:
            Color:
                rgba: [68/255, 68/255, 78/255, 1]
            Rectangle:
                pos: self.pos
                size: self.size
                source: self.img_source
        GridLayout:
            cols: 1
            rows: 4
            BoxLayout:
                Label:
                    id: exit_server
                    font_size: 23
                    text_size: self.size
                    halign: 'left'
                    valign: 'top'
                    markup: True
                BoxLayout:
                    background_color: [0,1,0,0.1]
                    size_hint_x: None
                    padding: [15, 0, 0, 0]
                    Label:
                        id: connection_time
                        size_hint_x: None
                        font_size: 19
                        text_size: self.size
                        halign: 'auto'
                        valign: 'top'
            GridLayout:
                cols: 2
                rows: 1
                Label:
                    id: exit_server_ip
                    font_size: 23
                    text_size: self.size
                    valign: 'top'
                AnchorLayout:
                    anchor_x: 'right'
                    size_hint_x: 0.7
                    BoxLayout:
                        orientation: 'horizontal'
                        BackgroundLabel:
                            id: exit_server_load
                            font_size: 19
                            text_size: self.size
                            halign: 'right'
                            valign: 'top'
            GridLayout:
                cols: 2
                rows: 1
                Label:
                    size_hint_x: 0.8
                    id: protocol
                    font_size: 23
                    text_size: self.size
                    halign: 'left'
                    valign: 'center'
                GridLayout:
                    cols: 2
                    rows: 1
                    BoxLayout:
                        orientation: 'horizontal'
                        Image:
                            id: bitrate_down_arrow
                            source: './images/bitrate-download-arrow.png'
                            size_hint: 0.25, 0.25
                            pos_hint: {'center_x': .5, 'center_y': .5}
                        Label:
                            id: data_received
                            font_size: 19
                            halign: 'right'
                            valign: 'center'
                    BoxLayout:
                        orientation: 'horizontal'
                        Image:
                            id: bitrate_up_arrow
                            source: './images/bitrate-upload-arrow.png'
                            size_hint: 0.25, 0.25
                            pos_hint: {'center_x': .5, 'center_y': .5}
                        Label:
                            id: data_sent
                            font_size: 19
                            halign: 'right'
                            valign: 'center'
            RelativeLayout:
                PvpnImageButton:
                    id: connection_window_button
                    source: self.normal_img
                    on_press: self.on_press_img()
                    on_release: self.on_release_img()
                    on_release: app.root.do_quickconnect_or_disconnect()

    PvpnTabbedPanel:
        size_hint_y: 0.67
        background_image: './images/active-tab-content-panel.png'
        tab_width: self.parent.width / 2
        pos_hint: {'center_x': 0.5, 'center_y': 0.335}
        tab_height: 76
        PvpnTabbedPanelItem:
            text: 'Countries'
            on_parent: self.trigger_action()
            GridLayout:
                cols: 1
                rows: 2
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: None
                    height: 60
                    canvas.before:
                        Color:
                            rgba:  [0.5176, 0.5176, 0.5569, 1]
                        Line:
                            width: 1
                            points: [self.pos[0], self.pos[1] + self.height, self.pos[0] + self.width, self.pos[1] + self.height]
                        Line:
                            width: 1
                            points: [self.pos[0], self.pos[1] ,self.pos[0] + self.width ,self.pos[1]]
                    BoxLayout:
                        size_hint: (0.25, 1)
                        padding: [20, 0, 0, 0]
                        SecureCoreSwitch:
                            id: secure_core_switch
                            size_hint: (0.5, 0.5)
                            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    Label:
                        id: secure_core_label
                        text: '[b]Secure Core[/b]'
                        markup: True
                        font_size: 20
                        color: [0.5176, 0.5176, 0.5569, 1]
                        text_size: self.size
                        halign: 'left'
                        valign: 'middle'
                        padding: [5, 10]
                PvpnScrollView:
                    id: countries_panel
                    pos: (0, 0)
                    bar_width: dp(10)
                    scroll_type: ['bars']
                    smooth_scroll_end: 10
        PvpnTabbedPanelItem:
            id: profiles
            text: 'Profiles'
            # BackgroundBoxLayout:
                # background_color: [0, 0, 1, 0.1]
            BoxLayout:
                Label:
                    text: 'Under construction...'


<PvpnServerTreeCountryNode>:
    background_color: [0.1647, 0.1647, 0.2078, 1]
    color_selected: [0.3451, 0.702, 0.4039, 0.1]
    even_color: [0, 0, 0, 0]
    odd_color: [0, 0, 0, 0]
    height: dp(40)
    padding: [0, 0, 20, 0]
    spacing: 15
    on_press: self.parent.toggle_node(self)
    Image:
        id: country_node_flag_icon
        pos_hint: {'left': 0, 'center_y': 0.5}
        size_hint: (0.1, 1)
    Label:
        id: country_node_country_name
        size_hint: (0.20, 1)
        pos_hint: {'right': 0.35, 'center_y': 0.5}
        text_size: self.size
        halign: 'left'
        valign: 'center'
    BoxLayout:
        id: country_node_features_layout
        orientation: 'horizontal'
        size_hint: (0.08, 1)
        pos_hint: {'right': 0.65, 'center_y': 0.5}
    PvpnImageButton:
        id: connect_button_icon
        source: './images/connect-small_150.png'
        normal_img: './images/connect-small_150.png'
        hover_img: './images/connect-small-hover_150.png'
        size_hint: (0.15, 0.8)
        padding: [5, 5, 5, 5]
        pos_hint: {'right': 1.5, 'center_y': 0.5}
        on_press: self.on_press_img()
        on_release: self.on_release_img()
        on_release: app.root.connect(country=root.ids.country_node_country_name.text)


<PvpnServerTreeServerNode>:
    background_color: [0.1647, 0.1647, 0.2078, 1]
    font_size: 19
    even_color: [0, 0, 0, 0]
    odd_color: [0, 0, 0, 0]
    height: dp(40)
    no_selection: True
    Label:
        id: server_node_server_load
        size_hint: (0.025, 1)
        pos_hint: {'left': 0, 'center_y': 0.5}
        text_size: self.size
        halign: 'left'
        valign: 'center'
    Label:
        id: server_node_server_name
        size_hint: (0.05, 1)
        pos_hint: {'right': 0.2, 'center_y': 0.5}
        size: self.texture_size
        text_size: self.size
        halign: 'left'
        valign: 'center'
    BoxLayout:
        orientation: 'horizontal'
        id: server_node_features_layout
        size_hint: (0.035, 1)
        pos_hint: {'right': 0.65, 'center_y': 0.5}
        Image:
            id: plus_server
            size_hint: (0.55, 0.55)
            pos_hint: {'x': 0, 'center_y': 0.5}
        Image:
            id: tor_or_p2p
            size_hint: (0.55, 0.55)
            pos_hint: {'x': 0, 'center_y': 0.5}
    Label:
        id: server_node_server_city
        size_hint: (0.065, 1)
        pos_hint: {'right': 1, 'center_y': 0.5}
        color: [0.5176, 0.5176, 0.5569, 1]
        size: self.texture_size
        text_size: self.size
        halign: 'center'
        valign: 'center'
    PvpnImageButton:
        id: connect_button_icon
        source: './images/connect-small_150.png'
        normal_img: './images/connect-small_150.png'
        hover_img: './images/connect-small-hover_150.png'
        size_hint: (0.05, 0.8)
        padding: [5, 5, 5, 5]
        pos_hint: {'right': 1, 'center_y': 0.5}
        on_release: app.root.connect(server_name=root.ids.server_node_server_name.text)


<PvpnPopup>:
    size_hint: (0.95, 0.35)
    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
    separator_color: [88/255, 179/255, 103/255, 1]
    title: self.title
    title_size: 30
    title_align: 'center'
    auto_dismiss: True
    background: './images/popup-background.png'


<SecureCoreNotificationPopup>:
    title: 'Attention'
    auto_dismiss: False
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: root.label_text
            font_size: 23
            text_size: self.size
            halign: 'center'
            valign: 'center'
        BoxLayout:
            orientation: 'horizontal'
            spacing: 10
            PvpnStandardButton:
                text: 'Cancel'
                font_size: 23
                size_hint: (0.5, 0.5)
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                on_release: app.root.reset_secure_core_switch(), app.root.set_sc_notification_close(), root.dismiss()
            PvpnStandardButton:
                text: 'Continue'
                font_size: 23
                size_hint: (0.5, 0.5)
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                on_release: Clock.schedule_once(app.root.update_secure_core_notification_text)


<ConnectingNotificationPopup>:
    title: 'New Connection'
    size_hint_y: 0.2
    Label:
        text: root.label_text
        font_size: 23
        text_size: self.size
        halign: 'center'
        valign: 'center'


<DisconnectingNotificationPopup>:
    title: 'Disconnecting'
    size_hint_y: 0.2
    Label:
        text: root.label_text
        font_size: 23
        text_size: self.size
        halign: 'center'
        valign: 'center'


<PvpnDropDownButton>:
    font_size: 19
    color: [0.651, 0.651, 0.651, 1]
    halign: 'left'
    valign: 'center'
    text_size: self.size
    background_normal: './images/dropdown-button-up_underline.png'
    background_down: './images/dropdown-button-down.png'
    size_hint_y: None
    height: '48dp'
    padding: [30, 10]


<PvpnDropDown>:
    id: pvpn_menu_dropdown
    padding: [50 , 0, 0, 0]
    canvas.after:
        Color:
            rgba:  [0.5176, 0.5176, 0.5569, 1]
        Line:
            width: 1
            rectangle: self.x, self.y, self.width, self.height
    PvpnDropDownButton:
        id: about_popup
        text: 'About'
        on_release: app.root.about_popup.open(), self.ids.pvpn_menu_dropdown.select('About')
    PvpnDropDownButton:
        id: account_popup
        text: 'Account'
        on_release: app.root.account_popup.open(), self.ids.pvpn_menu_dropdown.select('Account')
    PvpnDropDownButton:
        id: profies_popup
        text: 'Profiles'
        on_release: app.root.profiles_popup.open(), self.ids.pvpn_menu_dropdown.select('Profiles')
    PvpnDropDownButton:
        id: settings_popup
        text: 'Settings'
        on_release: app.root.settings_popup.open(), self.ids.pvpn_menu_dropdown.select('Settings')
    PvpnDropDownButton:
        id: help_popup
        text: 'Help'
        on_release: app.root.help_popup.open(), self.ids.pvpn_menu_dropdown.select('Help')
    PvpnDropDownButton:
        id: report_bug_popup
        text: 'Report Bug'
        on_release: app.root.report_bug_popup.open(), self.ids.pvpn_menu_dropdown.select('Report Bug')
    PvpnDropDownButton:
        id: logout_popup
        text: 'Logout'
        on_release: app.root.logout_popup.open(), self.ids.pvpn_menu_dropdown.select('Logout')
    PvpnDropDownButton:
        id: exit_popup
        text: 'Exit'
        background_normal: './images/dropdown-button-up_no_underline.png'
        on_release: app.root.exit_popup.open(), self.ids.pvpn_menu_dropdown.select('Exit')
